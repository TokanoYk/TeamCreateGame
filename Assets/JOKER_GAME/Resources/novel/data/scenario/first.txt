;新エンジン開発シナリオ　

;背景の定義

;ライブラリ呼び出し
;[call file=system target="*system_setting_buttons"]
;@call file=libs/utils

@jump file=title

[s]

;-------------------------


*jump_start
;メッセージウィンドウは最初は非表示です。
[showmessage]

テストスタート[p]
なんじゃこらや[p]
[call file=system target="*system_setting_buttons"]

スリープテスト[p]
;@sleepgame file=sleep 

;選択肢を使うためのライブラリ
@call file=libs/utils

[flag exp="f.name=永谷"]
{f.name}です

[bg_new name="background" layer="background" storage="school"]
[bg_show name="background" ]

@jump target=*chara_area

[call file=system target="*system_setting_buttons"]
@call file=libs/utils

選択肢作製[p]
[select_new text="選択肢１" target=*select1 ]
[select_new text="選択肢２だよ" target=*select2 ]
[select_new text="選択肢３これはおすすめ" target=*select3 ]

[select_show ]

[s]
ぽっぽろんが[p]
うわーーーーん。[p]
*select1
ココに飛ぶ
@jump target="select_again" 
*select2
２だよ
@jump target="select_again" 
*select3 
３だね
@jump target="select_again" 

;選択肢完了

マクロの最後まできました。[p]


テスト[p]

call完了[p]



*return_choice


[s]


*choice_done

{evt.name}を選んだよ[p]

@jump target=*return_choice



;[button_new name="button_choice" text="これはテスト" scale_x=4 scale_y=3 y=1 ]
;[button_show name="button_choice" ]

;[button_new name="button_choice2" text="これもテスト" scale_x=4  scale_y=3 y=3 ]
;[button_show name="button_choice2" ]




[evt name="button_choice2" target="*jump_start" ]

ボタン表示[p]


;[text_new name="text_1" val="のおおおおおおおおおお" ][p]
;[text_show name="text_1" ][p]1
;[text_hide name="text_1" ][p]2
;[text_pos name="text_1" x=0.3][p]3
;[text_show name="text_1" ][p]4
;[text_mod name="text_1" val="げええｗｗｗｗｗ" ][p]4

[call file="scene1" target=calltarget]


@jump target="chara"

;[text_new name="text_2" val="のおおおおおおおおおお" ]p[]


音楽再生[p]
[playbgm wait=false time=3 storage="music"]
再生されましたか？[p]
[playse storage="button" loop=true][p]
[stopse]
[playse storage="button"][p]



停止します[p]
[stopbgm]

;[s]


[calc exp="f.num=3+12"]
[calc exp="f.num={f.num}+1"]

[call target=*wowo arg1={f.num} arg2="テスト"]
なんだこれ[p]
@jump target="gege"

*wowo
コール先[p]
[emb exp="{mp.arg1|デフォルト値}"][p]

[return]

*gege

ジャンプ先[p]


*while_label 
ここは{f.num}です[p]

3[p]


[if exp="{f.num} != 0"]

@jump target=*while_label

[else]

@jump target=while_end

[endif]

*while_end

ループ終了[p]

[flag exp="f.name =シケモク"]

私の名前は{f.name}です。[p]

;こんな風に１行でも書ける
[if exp="{f.num}==15"]ここに入ります[p][else]不正解[p][endif]

;コール　引数も渡せる
[call target=*wowo arg1={f.num} arg2="テスト"]

*wowo

コール先[p]
[emb exp="{mp.arg1|デフォルト値}"][p]

[return]

*222

@jump target=*chara

[calc exp="f.name=5%3"]
[flag exp="f.val =永e谷"]

計算結果は[emb exp="f.name"]です。[p]

なんだろうこの展開[p]
[macro name="test"]

[emb exp={f.val}][p]

[emb exp="{mp.gege|そんな値ないよ。}"]

[return]

[emb exp="{mp.text2}"]
[p]
マクロ2[p]
[endmacro]


[test gege="のおおおおお" text2="gyaaaaa"]


[jump file="scene1"]

;代入の場合は{}不要。評価する場合は必要
[calc exp="f.name=5%3"]
[flag exp="f.val =永e谷"]

計算結果は[emb exp="f.name"]です。[p]

[test]
[test]


[if exp="{f.name}<=1"]
	
	if文の中にはいりました[p]
	ここも実行されるかな[p]

	[if exp="{f.name}<=2"]
		if文の入れ子です。[p]
		大丈夫かな[p]
	[else]
		ここはえるす
	[endif]

[elsif exp="{f.name}<=1"]

	elsifです。ここは実行されるべき[p]

[else]

	[if exp="{f.name}<=1"]
		if文の入れ子です。[p]
		大丈夫かな[p]
	[elsif exp="{f.name} ==2"]
		
		じゃじゃじゃじゃーーー[p]
		@test2

	[else]
		ここはえるす
	[endif]


[endif]


[if exp="{f.val} !== 永谷"]
[emb exp="f.val"][p]
[else]
ぎゃああああ[p]
@endif



if文を抜けました[p]


;*label2

*test
ここに飛んだらおｋ[p]

があああああああ[p]

別ファイルにジャンプ[p]

@jump file=scene1 target="test"

*chara_area


キャラクター定義[p]
@image_new name="nagatani" sort=5 storage="51" 
@image_show name="nagatani"

img_show[p]

@tag_default tag="chara"
[chara_new name="hiro" tag="chara" storage="mayuri_clothes_earnest" scale="1.2"]
[chara_new name="hiro2" tag="chara" storage="mayuri_clothes_lonely"]
[chara_new name="hiro3" tag="chara" storage="senior01_looking_away"]
@reset_tag_default

[chara_face name="hiro" face="no1" storage=mayuri_clothes_lonely ]
[chara_face name="hiro" face="no2" storage=senior01_looking_away ]


キャラ表示w[p]
@chara_pos name="hiro" x=-5 
@chara_pos name="hiro2" x=0 
@chara_pos name="hiro3"x=5 



キャラ三人表示[p]
[evt tag="chara" act="click" target="click_chara"]

*back_chara
@chara_show tag="chara" wait=true
[s]

;return でここに戻ってくる。[s]なら、-1 して。

*click_chara
@evt_stop
			
[hidemessage]
[chara_hide tag=chara]
[showmessage]


[trace exp="evt"][p]
テストですこれは、なんでここだけおかしくなるのか。[p]
{evt.caller_name}がクリックされたよ[p]
@chara_pos name="{evt.caller_name}" scale=0.5

戻ります[p]
@evt_resume

;@jump target=*chara_mod
@jump target=*back_chara


	でえええええええええ[p]

表示されたかな[p]

キャラを消します[p]

;[chara_hide tag="chara"]
消えましたね	[p]

[chara_remove name="hiro2"]
	キャラ削除[p]

;[chara_pos name="hiro" x=3]
	再度表示[p]
[chara_show tag="chara" time=3]

[p]

*chara_mod

facemodno1
[chara_mod name="hiro" face="no1"][p]
facemodno2
[chara_mod name="hiro" face="no2"][p]
facemoddefalt
[chara_mod name="hiro" face="default"][p]
facemod storage
[chara_mod name="hiro" storage="senior01_looking_away"]
[p]
;[chara_show storage="mayuri_clothes_earnest"]

;[chara_show x="2.3" storage="mayuri_clothes_earnest"]

;[chara_show x="-2.3" storage="mayuri_clothes_earnest"]


ぐおおおおおお[p]おおおおおおおおおおおお。
げえええええええええええええええ。[p]

背景を変更します[p]

[bg storage="shops"]

ふぁふぁふぁふぁふぁいいい[p]
[bg storage=room animation="TransShowLeft"]

のおおおおおおお[l][r]
*start

[cm  ]test [l][r]
;[back  storage="room.jpg" time="5000"  ]
[tb_show_message_window  ]
[wowow storage=44 www=55]


#ガイド
こんにちは。[p]
ティラノビルダーの初期プロジェクトです。[p]


[s  ]
